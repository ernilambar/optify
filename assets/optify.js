(()=>{"use strict";var e={576:(e,t,a)=>{var l=a(795);t.H=l.createRoot,l.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};const a=window.React;var l=function a(l){var n=t[l];if(void 0!==n)return n.exports;var i=t[l]={exports:{}};return e[l](i,i.exports,a),i.exports}(576);const n=window.wp.i18n,i=window.wp.components,o=({config:e,restUrl:t,nonce:l,panelId:o,onSave:s,onError:c,underCog:r=!1})=>{const[d,p]=(0,a.useState)([]),[m,u]=(0,a.useState)({}),[f,y]=(0,a.useState)({}),[v,g]=(0,a.useState)(!0),[E,h]=(0,a.useState)(!1),[C,N]=(0,a.useState)(null),[b,k]=(0,a.useState)(!1),[w,x]=(0,a.useState)(!r),{panelTitle:L,saveButtonText:S,savingText:$,loadingText:B,messages:A}=e;(0,a.useEffect)(()=>{const e=Object.keys(m).some(e=>m[e]!==f[e]);k(e)},[m,f]),(0,a.useEffect)(()=>{(async()=>{try{const e=`fields/${o}`,a=`options/${o}`,n=await fetch(`${t}${e}`,{headers:{"X-WP-Nonce":l,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Failed to fetch fields: ${n.status}`);const i=(await n.json()).data||[];p(i);const s=await fetch(`${t}${a}`,{headers:{"X-WP-Nonce":l,"Content-Type":"application/json"}});if(!s.ok)throw new Error(`Failed to fetch values: ${s.status}`);const c=(await s.json()).data||{};u(c),y(c)}catch(e){N({type:"error",message:A.loadError}),c?.(e)}finally{g(!1)}})()},[t,l,A.loadError,c,o]);const T=(e,t)=>{u(a=>({...a,[e]:t}))},P=async()=>{h(!0);try{const e=`options/${o}`,a=await fetch(`${t}${e}`,{method:"POST",headers:{"X-WP-Nonce":l,"Content-Type":"application/json"},body:JSON.stringify({values:m})}),n=await a.json();if(!a.ok)throw new Error(n.message||`Failed to save: ${a.status}`);const i=n.data?.values||m;y(i),u(i),k(!1),N({type:"success",message:A.saveSuccess}),s?.(i),r&&setTimeout(()=>{x(!1),N(null)},1e3)}catch(e){N({type:"error",message:A.saveError}),c?.(e)}finally{h(!1)}},_=(e,t,l)=>{const{name:n,label:o,type:s,choices:c=[]}=e,r={...e};switch(delete r.name,delete r.label,delete r.type,delete r.choices,delete r.default,delete r.required,s){case"text":const s={readonly:!1,size:"medium",...e.settings};return(0,a.createElement)("div",{className:"optify-field optify-field-type-text"},(0,a.createElement)("label",{className:"optify-field-label"},o),(0,a.createElement)("input",{type:"text",value:t,readOnly:s.readonly,onChange:e=>l(n,e.target.value),className:"optify-field-input"}),(c||[]).length>0&&(0,a.createElement)("div",{className:"optify-field-quick-select"},(0,a.createElement)("span",{className:"optify-field-quick-select-label"},"Quick select:"),(0,a.createElement)(i.ButtonGroup,null,(c||[]).map(e=>(0,a.createElement)(i.Button,{key:e.value,variant:t===e.value?"primary":"secondary",size:"small",onClick:()=>l(n,e.value)},e.label)))));case"email":return e.settings,(0,a.createElement)("div",{className:"optify-field optify-field-type-email"},(0,a.createElement)("label",{className:"optify-field-label"},o),(0,a.createElement)("input",{type:"email",value:t,onChange:e=>l(n,e.target.value),className:"optify-field-input"}));case"url":return(0,a.createElement)(i.TextControl,{label:o,type:"url",value:t,onChange:e=>l(n,e)});case"number":return e.settings,(0,a.createElement)("div",{className:"optify-field optify-field-type-number"},(0,a.createElement)("label",{className:"optify-field-label"},o),(0,a.createElement)("input",{type:"number",value:t,onChange:e=>l(n,e.target.value),className:"optify-field-input"}),(c||[]).length>0&&(0,a.createElement)("div",{className:"optify-field-quick-select"},(0,a.createElement)("span",{className:"optify-field-quick-select-label"},"Quick select:"),(0,a.createElement)(i.ButtonGroup,null,(c||[]).map(e=>(0,a.createElement)(i.Button,{key:e.value,variant:t===e.value?"primary":"secondary",size:"small",onClick:()=>l(n,e.value)},e.label)))));case"password":return(0,a.createElement)(i.TextControl,{label:o,type:"password",value:t,onChange:e=>l(n,e)});case"textarea":const r={readonly:!1,size:"medium",...e.settings};return(0,a.createElement)("div",{className:"optify-field optify-field-type-textarea"},(0,a.createElement)("label",{className:"optify-field-label"},o),(0,a.createElement)("textarea",{value:t,readOnly:r.readonly,onChange:e=>l(n,e.target.value),className:"optify-field-textarea"}));case"radio":const d={layout:"vertical",size:"medium",style:"default",spacing:"normal",...e.settings},p=`optify-field-radio-group optify-field-radio-group--${d.layout}${"tight"===d.spacing?" optify-field-radio-group--tight":""}`;return(0,a.createElement)("div",{className:"optify-field optify-field-type-radio"},(0,a.createElement)("span",{className:"optify-field-label"},o),(0,a.createElement)("div",{className:p},(c||[]).map(e=>(0,a.createElement)("label",{key:e.value,className:"optify-field-radio-option"},(0,a.createElement)("input",{type:"radio",name:n,value:e.value,checked:t===e.value,onChange:e=>l(n,e.target.value)}),e.label))));case"checkbox":return(0,a.createElement)("div",{className:"optify-field optify-field-type-checkbox"},(0,a.createElement)(i.CheckboxControl,{label:o,checked:t,onChange:e=>l(n,e)}));case"select":return(0,a.createElement)("div",{className:"optify-field optify-field-type-select"},(0,a.createElement)(i.SelectControl,{label:o,value:t,options:c||[],onChange:e=>l(n,e)}));case"toggle":return(0,a.createElement)("div",{className:"optify-field optify-field-type-toggle"},(0,a.createElement)(i.ToggleControl,{label:o,checked:!!t,onChange:e=>l(n,e)}));case"multi-check":const m={layout:"vertical",size:"medium",style:"default",spacing:"normal",...e.settings},u=`optify-field-multi-check-group optify-field-multi-check-group--${m.layout}${"tight"===m.spacing?" optify-field-multi-check-group--tight":""}`;return(0,a.createElement)("div",{className:"optify-field optify-field-type-multi-check"},(0,a.createElement)("span",{className:"optify-field-label"},o),(0,a.createElement)("div",{className:u},(c||[]).map(e=>(0,a.createElement)("label",{key:e.value,className:"optify-field-multi-check-option"},(0,a.createElement)("input",{type:"checkbox",value:e.value,checked:!!Array.isArray(t)&&t.includes(e.value),onChange:a=>{let i=Array.isArray(t)?[...t]:[];a.target.checked?i.push(e.value):i=i.filter(t=>t!==e.value),l(n,i)}}),e.label))));case"buttonset":return(0,a.createElement)("div",{className:"optify-field optify-field-type-buttonset"},(0,a.createElement)("span",{className:"optify-field-label"},o),(0,a.createElement)(i.ButtonGroup,null,(c||[]).map(e=>(0,a.createElement)(i.Button,{key:e.value,variant:t===e.value?"primary":"secondary",onClick:()=>l(n,e.value)},e.label))));case"heading":return(0,a.createElement)("div",{className:"optify-field optify-field-type-heading"},(0,a.createElement)("h3",{className:"optify-field-heading"},o));case"message":const f=e.status||"info";return"description"===f?(0,a.createElement)("div",{className:"optify-field optify-field-type-message"},(0,a.createElement)("div",{className:"optify-field-message"},o)):(0,a.createElement)("div",{className:"optify-field optify-field-type-message"},(0,a.createElement)(i.Notice,{status:f,isDismissible:!1},o));default:return null}};return v?(0,a.createElement)("div",{className:"optify-loading"},B):r?(0,a.createElement)("div",{className:"optify-options-panel optify-options-panel--under-cog"},C&&(0,a.createElement)(i.Notice,{status:C.type,onRemove:()=>N(null)},C.message),(0,a.createElement)("div",{className:"optify-cog-container"},(0,a.createElement)(i.Button,{variant:"secondary",className:"optify-cog-button",onClick:()=>x(!w),"aria-label":w?(0,n.__)("Hide settings","optify"):(0,n.__)("Show settings","optify")},(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"optify-cog-icon "+(w?"optify-cog-icon--expanded":"")},(0,a.createElement)("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5A3.5 3.5 0 0 1 15.5 12A3.5 3.5 0 0 1 12 15.5M19.43 12.97C19.47 12.65 19.5 12.33 19.5 12C19.5 11.67 19.47 11.34 19.43 11L21.54 9.37C21.73 9.22 21.78 8.95 21.66 8.73L19.66 5.27C19.54 5.05 19.27 4.96 19.05 5.05L16.56 6.05C16.04 5.66 15.5 5.32 14.87 5.07L14.5 2.42C14.46 2.18 14.25 2 14 2H10C9.75 2 9.54 2.18 9.5 2.42L9.13 5.07C8.5 5.32 7.96 5.66 7.44 6.05L4.95 5.05C4.73 4.96 4.46 5.05 4.34 5.27L2.34 8.73C2.22 8.95 2.27 9.22 2.46 9.37L4.57 11C4.53 11.34 4.5 11.67 4.5 12C4.5 12.33 4.53 12.65 4.57 12.97L2.46 14.63C2.27 14.78 2.22 15.05 2.34 15.27L4.34 18.73C4.46 18.95 4.73 19.04 4.95 18.95L7.44 17.95C7.96 18.34 8.5 18.68 9.13 18.93L9.5 21.58C9.54 21.82 9.75 22 10 22H14C14.25 22 14.46 21.82 14.5 21.58L14.87 18.93C15.5 18.68 16.04 18.34 16.56 17.95L19.05 18.95C19.27 19.04 19.54 18.95 19.66 18.73L21.66 15.27C21.78 15.05 21.73 14.78 21.54 14.63L19.43 12.97Z"})))),w&&(0,a.createElement)("div",{className:"optify-panel-content"},(0,a.createElement)(i.Panel,null,(0,a.createElement)(i.PanelBody,null,d.map(e=>(0,a.createElement)(i.PanelRow,{key:e.name},_(e,m[e.name],T))))),(0,a.createElement)("div",{className:"optify-actions"},(0,a.createElement)(i.Button,{variant:"primary",isBusy:E,onClick:P,disabled:E||!b},E?$:S),(0,a.createElement)(i.Button,{variant:"secondary",onClick:()=>x(!1),disabled:E},(0,n.__)("Close","optify"))))):(0,a.createElement)("div",{className:"optify-options-panel"},C&&(0,a.createElement)(i.Notice,{status:C.type,onRemove:()=>N(null)},C.message),(0,a.createElement)(i.Panel,null,(0,a.createElement)(i.PanelBody,null,d.map(e=>(0,a.createElement)(i.PanelRow,{key:e.name},_(e,m[e.name],T))))),(0,a.createElement)("div",{className:"optify-actions"},(0,a.createElement)(i.Button,{variant:"primary",isBusy:E,onClick:P,disabled:E||!b},E?$:S)))},s=({config:e,restUrl:t,nonce:l,panelId:i,underCog:s=!1})=>e&&t&&l&&i?(0,a.createElement)(o,{config:e,restUrl:t,nonce:l,panelId:i,underCog:s,onSave:e=>{},onError:e=>{}}):(0,a.createElement)("div",{className:"optify-error"},(0,n.__)("Configuration not found. Please refresh the page.","optify"));document.addEventListener("DOMContentLoaded",()=>{const{optifyAdmin:e}=window;if(!e||!e.panels)return;const{panels:t,restUrl:n,nonce:i}=e,o=document.querySelectorAll('[id^="optify-"][id$="-panel"]');document.querySelectorAll('[data-location="dashboard_widget"]'),[...o,...document.querySelectorAll('#dashboard-widgets [id^="optify-"][id$="-panel"]')].forEach(e=>{const o=e.id.replace("optify-","").replace("-panel",""),c=e.dataset.location,r="true"===e.dataset.underCog;if(c&&t[c]&&t[c][o])try{(0,l.H)(e).render((0,a.createElement)(s,{config:t[c][o],restUrl:n,nonce:i,panelId:o,underCog:r}))}catch(e){}})})})();